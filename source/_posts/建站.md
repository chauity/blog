---
title: 构建本站
date: 2023-12-28 14:42:29
tags: build the net
---


# HEXO部署本站

## 部署到本地

1. 安装[node.js](https://nodejs.org/en)
2. 安装hexo插件 + 创建博客
``` hexo
npm install hexo-cli -g
hexo init <folder>
cd <folder>
npm install
```
3. 主题下载
```
git clone https://github.com/blinkfox/hexo-theme-matery.git ./themes/matery
```
4. 修改主题
![image-20231228113434249](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/1.jpg)
![image-20231228113556831](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/2.jpg)

5. 本地部署
``` hexo
hexo c && hexo g && hexo s
```

访问网页 `http://localhost:4000`

![image-20231228113914368](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/10.jpg)

## 部署到GitHub

1. GitHub创建仓库，名字为xxx.github.io (xxx是你的GitHub用户名)
![image-20231228114015376](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/3.jpg)

2. 配置GitHub邮箱和名字

``` hexo
git config --global user.name "xxx"				#提交GitHub的用户名 
git config –-global user.email `xxx@xx.xxx`   	#你的邮箱
```

3. 本地生成密钥对
``` shell
ssh-keygen -t rsa
```

4. 将密钥对的公钥内容拷贝到GitHub上，一般存放在**C:\Users\xxx\.ssh （xxx是你的电脑用户名）**中
![image-20231228115654705](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/4.jpg)

![image-20231228134437625](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/5.jpg)

5. 部署

配置_config.yml
``` hexo
deploy:
  type: git
  repository: git@github.com:xxx/xxx.github.io.git # xxx是你的用户名
  branch: master # 可能是main，看你的主干分支命名
```
``` npm
npm install hexo-deployer-git --save
hexo d
```

6. 加速
    正常访问GitHub网站，可能不能访问，这时候可以使用[vercel](https://vercel.com/)来托管仓库，加速访问
    ![image-20231228135603380](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/6.jpg)

外网访问
![image-20231228141448622](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/11.jpg)

## 设置域名

1. 域名购买，阿里云的6位数字xyz的域名，例如`351627.xyz`，非常便宜，我买了5年，只花了34。
2. 获得你的GitHub的IP地址
``` shell
ping xxx.github.io
```
![image-20231228142658113](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/8.jpg)


3. 域名解析你获取的IP，域名解析控制台记录值填你获取到的IP，解析需要等待10分钟左右，才能解析到你的IP地址，耐心等待
![image-20231228142222926](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/9.jpg)


4. GitHub配置你的域名，Custom domain填写你的域名

![image-20231228143234127](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/12.jpg)

5. **仓库目录创建一个名为CNAME的文件，文件内容是你的域名，**例如`351627.xyz`,等几分钟就完成网站了，你可以直接ping你的域名，发现和你的GitHub的IP一样的


6. 后续发现使用`hexo d`重新部署会顶掉之前的域名绑定，访问出现404，请看[此文](/20231229/bu-shu-yu-ming-diu-shi/)解决

7. 如果需要网站加速，请看[此文](/20221103/wang-zhan-jia-su/)解决

## 大功告成

![image-20231228143326753](https://gcore.jsdelivr.net/gh/chauity/images/typora_imgs/231228/13.jpg)
